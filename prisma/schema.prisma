// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [postgis]
}

model Event {
  id               String    @id @default(uuid())
  title            String    @db.VarChar(255)
  description      String?   @db.Text
  startTime        DateTime
  endTime          DateTime?
  latitude         Float
  longitude        Float
  location         Unsupported("geography(Point, 4326)")?
  address          String?
  city             String?
  state            String?
  country          String?
  postalCode       String?   @map("postal_code")
  category         String?
  tags             String[]  @default([])
  imageUrl         String?   @map("image_url")
  organizerName    String?   @map("organizer_name")
  organizerContact String?   @map("organizer_contact")
  capacity         Int?
  price            Float?
  isVirtual        Boolean   @default(false) @map("is_virtual")
  externalUrl      String?   @map("external_url")
  createdAt        DateTime  @default(now()) @map("created_at")
  updatedAt        DateTime  @updatedAt @map("updated_at")

  @@index([startTime])
  @@index([category])
  @@index([latitude, longitude])
  @@map("events")
}
